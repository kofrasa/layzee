// layzee.js 0.0.0
// Copyright (c) 2018 Francis Asante
// MIT
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.layzee=n()}(this,function(){"use strict";function e(e){return e instanceof b?e:new b(e)}function n(e){return s(e)||!!e&&"object"===("undefined"==typeof e?"undefined":f(e))&&u(e.next)}function t(n,t,r){return void 0===t&&(t=n,n=0),r||(r=n<t?1:-1),e(function(){if(r>0&&n<t||r<0&&n>t){var e={value:n,done:!1};return n+=r,e}return{done:!0}})}function r(e,n){return e<n?-1:e>n?1:0}function u(e){return!!e&&"function"==typeof e}function i(e,n){var t=e.slice(n+1);e.splice(n),Array.prototype.push.apply(e,t)}function o(e,n,t){var r=!1,u=-1,o={},f=0;return function(a){a=a===t;try{e:for(;!r;){var c=e();u++;for(var s=-1,b=n.length,m=!1;++s<b;){var x=n[s],w=x.func,S=x.type;switch(S){case h:c=w(c,u);break;case y:if(!w(c,u))continue e;break;case v:--x.func,x.func||(m=!0);break;case p:if(!w(c,u))break e;break;case d:--x.func,x.func||i(n,s);continue e;case _:if(w(c,u))continue e;i(n,s),--b,--s;break;case k:var g=w(c);if(o[g])continue e;o[g]=1;break;default:break e}}if(r=m,!a)return{value:c,done:!1};t[f++]=c}}catch(E){if(E!==l)throw E}return o=null,r=!0,{done:!0}}}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},c=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();e.VERSION="0.0.0",e.isIterator=n,e.range=t;var s=Array.isArray,l=new Error,h=1,y=2,v=3,p=4,d=5,_=6,k=7,b=function(){function t(e){if(a(this,t),this.__iteratees=[],this.__only=!1,this.__done=!1,this.__buf=[],u(e)&&(e={next:e}),s(e))e=function(e){var n=e.length,t=0;return function(){if(t<n)return e[t++];throw l}}(e);else if(n(e))e=function(e){return function(){var n=e.next();if(n.done)throw l;return n.value}}(e);else if(!u(e))throw new Error("Source is not iterable. Must be Array, Function or Object{next:Function}");this.next=o(e,this.__iteratees,this.__buf)}return c(t,[{key:Symbol.iterator,value:function(){return this}},{key:"_validate",value:function(){if(this.__only)throw new Error("Cannot add iteratee/transform after `one()`")}},{key:"_push",value:function(e){return this._validate(),this.__iteratees.push(e),this}},{key:"map",value:function(e){return this._push({type:h,func:e})}},{key:"filter",value:function(e){return this._push({type:y,func:e})}},{key:"take",value:function(e){return e>0?this._push({type:v,func:e}):this}},{key:"takeWhile",value:function(e){return this._push({type:p,func:e})}},{key:"drop",value:function(e){return e>0?this._push({type:d,func:e}):this}},{key:"dropWhile",value:function(e){return this._push({type:_,func:e})}},{key:"uniq",value:function(e){return this._push({type:k,func:e||JSON.stringify})}},{key:"sample",value:function(e){return e=e||.5,this.filter(function(n){return Math.random()<e})}},{key:"transform",value:function(n){this._validate();var t=this,r=void 0;return e(function(){return r||(r=e(n(t.value()))),r.next()})}},{key:"reverse",value:function(){return this.transform(function(e){return e.reverse(),e})}},{key:"sort",value:function(e){return this.transform(function(n){return n.sort(e),n})}},{key:"sortBy",value:function(e,n){n=n||r;var t=function(t,r){return t===r?0:n(e(t),e(r))};return this.transform(function(e){return e.sort(t),e})}},{key:"one",value:function(){return this.take(1),this.__only=!0,this}},{key:"value",value:function(){return this.__done||(this.__done=this.next(this.__buf).done),this.__only?this.__buf[0]:this.__buf}},{key:"each",value:function(e){for(;;){var n=this.next();if(n.done)break;if(e(n.value)===!1)return!1}return!0}},{key:"reduce",value:function(e,n){var t=this.next(),r=0;for(void 0!==n||t.done||(n=t.value,t=this.next(),r++);!t.done;)n=e(n,t.value,r++),t=this.next();return n}},{key:"groupBy",value:function(e){return this.reduce(function(n,t){var r=e(t);return n[r]||(n[r]=[]),n[r].push(t),n},{})}},{key:"size",value:function(){return this.reduce(function(e,n){return++e},0)}},{key:"max",value:function(e){return e=e||r,this.reduce(function(n,t){return e(n,t)>0?n:t})}},{key:"min",value:function(e){return e=e||r,this.reduce(function(n,t){return e(n,t)<0?n:t})}},{key:"partition",value:function(e){var n=this.groupBy(e);return[n["true"],n["false"]]}}]),t}();return e});
